#include <SPI.h>
#include "RF24.h"
#include "printf.h"   // must include this to use radio.printDetails();
#include "PENTEST_NRF.h"

#define CE_PIN 8
#define CSN_PIN 7
#define MAX_LOAD_SIZE 32


RF24 radio(CE_PIN, CSN_PIN);
PENTEST_NRF pentester(&radio);

    byte outload[MAX_LOAD_SIZE];

void setup(){
  Serial.begin(115200);
  printf_begin();                               // This is for initializing printf that is used by printDetails()
  radio.begin();                           //turn on radio
  pentester.role = 1;   //set role to 1 for transmit roles when not changing roles via serial commands
  pentester.init();
  radio.printDetails();              
  Serial.println("connecting................");
  Serial.println("Please type the commands you would like to send surrounded by brackets []");
  Serial.println("To open cmd/terminal, use commands '@1'(windows), '@2' (Linux) and '@3' (Mac) ");
  Serial.println("--------------------------------------------------------"); 
}   

                                                                                               

void loop() {
    if (pentester.getInput(outload, MAX_LOAD_SIZE)){
      pentester.txReliable(outload);
      memset(outload, 0, MAX_LOAD_SIZE);
    }
    pentester.checkForRadioFail();
}

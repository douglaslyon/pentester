#ifndef PENTEST_NRF_H
#define PENTEST_NRF_H

#include "Arduino.h"
#include "RF24.h"
#include <SPI.h>






class PENTEST_NRF{
  public: 
    PENTEST_NRF(RF24 *myradio);

    int checkRole();     //returns boolean equivalent of node role (0 or 1), but real purpose is to check if role has been changed via serial command
    void rxReliable(byte inload[]); //handles acknowledgements automatically
    bool transmitData(byte outload[]);
    int getFailCount(int howOftenToPrint);
    byte nodeAddresses[2][6] = { {"Node1"} , {"Node2"} };
    rf24_datarate_e default_DataRate = RF24_1MBPS;
    byte default_ack = '1';
    void txRetryUntilSuccess(byte outload[], unsigned long timeoutmillis = 30000);

    void init(bool waitForSerial=true);
    void openPipes();
    void checkForRadioFail();
    bool getInput(byte outload[], int loadSize);
    int role;



  private: 
    RF24 *node;
    
};

#endif

#ifndef PENTEST_NRF_H
#define PENTEST_NRF_H

#include "Arduino.h"
#include "RF24.h"
#include <SPI.h>


  #define DEF_ACK '1'



class PENTEST_NRF{
  public: 
    PENTEST_NRF(RF24 *myradio);

    void init(bool waitForSerial=true);
    void openPipes();
    void checkForRadioFail();
    bool PENTEST_NRF::getInput(byte outload[], int loadSize);
    void PENTEST_NRF::setRole(int newrole);

    
    int checkRole(bool printChange=true);     //returns boolean equivalent of node role (0 or 1), but real purpose is to check if role has been changed via serial command
    bool rxReliable(byte inload[]); //handles acknowledgements automatically, will return false if rx is unsuccessful
    bool txReliable(byte outload[]);
    int getFailCount(int howOftenToPrint);
    byte nodeAddresses[2][6] = { {"Node1"} , {"Node2"} };
    rf24_datarate_e default_DataRate = RF24_1MBPS;

  private: 
    RF24 *radio;
    unsigned long sendCount;
    unsigned long rxCnt;
    unsigned long failCount;
            
    uint32_t configTimer;
    int role;
};

#endif

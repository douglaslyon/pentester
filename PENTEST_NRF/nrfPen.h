#ifndef NRFPEN_H
#define NRFPEN_H

#include "Arduino.h"
#include "RF24.h"
#include <SPI.h>


  #define DEF_ACK '1'



class nrfPen{
  public: 
    nrfPen(RF24 *myradio);
    rf24_datarate_e default_DataRate;

    void init(bool waitForSerial=true);
    void openPipes();
    void checkForRadioFail();
    
    int checkRole();     //returns boolean equivalent of node role (0 or 1), but real purpose is to check if role has been changed via serial command
    bool rxReliable(byte inload[]); //handles acknowledgements automatically, will return false if rx is unsuccessful
    bool txReliable(byte outload[]);
    int getFailCount(int howOftenToPrint);
    byte nodeAddresses[2][6] = { {"Node1"} , {"Node2"} };
  private: 
    RF24 *radio;
    unsigned long sendCount;
    unsigned long rxCnt;
    unsigned long failCount;
            
    uint32_t configTimer;
    int role;
};

#endif
